oblock light(LIGHT target, LINE_WRITER remote) {
    println(target.state);
    if (remote.msg == "ON") {
        target.state = true;
    }
    else if (remote.msg == "OFF") {
        target.state = false;
    }
    else {
        println("INVALID COMMAND");
        target.state = !target.state; 
    }
}

oblock button(BUTTON button, LIGHT rpi_light) {
    if (button.pressed == true) {
        println("button pressed!");
        rpi_light.state = true; 
    }
    else {
        println("button depressed!");
        rpi_light.state = false; 
        rpi_light.state = !rpi_light.state; 
    }
}

setup() {
    LIGHT rpi_light = "rpi::PIN-16";
    LINE_WRITER rpi_light_controller = "remote::file-file1.txt"; 
    light(rpi_light, rpi_light_controller);
    
    BUTTON rpi_button = "rpi::PIN-21";
    button(rpi_button, rpi_light);
}