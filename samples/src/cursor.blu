oblock fileAccess(TEXT_FILE txt, KEYBOARD cmd) : 
triggerOn([cmd, txt], {
    "id" : "initCmd",
    "rule" : cmd
}), processPolicy({
    txt : {
        "read" : "any",
        "ignoreWriteBacks" : false
    }
})
{
    if (getTrigger() == "initial") {
        return;
    }
    else if (getTrigger() == "initCmd") {
        disableTrigger("initCmd", "fileAccess");
    }

    print(cmd.key);
    if (cmd.key == "R") {
        txt.index = 0;
        txt.operation = "READ 7";
    }
    else if (cmd.key == "W") {
        txt.operation = "WRITE ain't no way boy";
    }
    else {
        println("Bad command issued.");
    }
    //push(txt);
    //pull(txt);

    println(txt.readResult, txt.writeResult);
}

setup() {
    TEXT_FILE TXT = "ctl::file-file3.txt";
    KEYBOARD CMD = "ctl::mode-all";
    fileAccess(TXT, CMD);
}