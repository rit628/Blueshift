[
    {
        "name" : "buttonLight",
        "binded_devices" : [
            {
                "device_name" : "button",
                "type" : 17,
                "controller" : "rpi",
                "port_maps" : {
                    "PIN" : "21"
                },
                "initialValue" : {
                    "pressed" : false
                },
                "isVtype" : false,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 1
            },
            {
                "device_name" : "mode",
                "type" : 4,
                "controller" : "MASTER",
                "port_maps" : {

                },
                "initialValue" : "red",
                "isVtype" : true,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 0
            },
            {
                "device_name" : "redLight",
                "type" : 14,
                "controller" : "rpi",
                "port_maps" : {
                    "PIN" : "17"
                },
                "initialValue" : {
                    "on" : false
                },
                "isVtype" : false,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 1
            },
            {
                "device_name" : "greenLight",
                "type" : 14,
                "controller" : "rpi",
                "port_maps" : {
                    "PIN" : "27"
                },
                "initialValue" : {
                    "on" : false
                },
                "isVtype" : false,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 1
            }
        ],
        "bytecode_offset" : 95,
        "inDevices" : [

        ],
        "outDevices" : [

        ],
        "hostController" : "MASTER",
        "triggers" : [
            {
                "rule" : [
                    "button"
                ],
                "id" : "",
                "priority" : 1
            }
        ]
    },
    {
        "name" : "buttonLog",
        "binded_devices" : [
            {
                "device_name" : "button",
                "type" : 17,
                "controller" : "rpi",
                "port_maps" : {
                    "PIN" : "21"
                },
                "initialValue" : {
                    "pressed" : false
                },
                "isVtype" : false,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 1
            },
            {
                "device_name" : "mode",
                "type" : 4,
                "controller" : "MASTER",
                "port_maps" : {

                },
                "initialValue" : "red",
                "isVtype" : true,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 0
            },
            {
                "device_name" : "countMap",
                "type" : 7,
                "controller" : "MASTER",
                "port_maps" : {

                },
                "initialValue" : {
                    "red" : 0,
                    "green" : 0
                },
                "isVtype" : true,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 0
            },
            {
                "device_name" : "fl",
                "type" : 10,
                "controller" : "CTL",
                "port_maps" : {
                    "file" : "logfile.txt"
                },
                "initialValue" : {
                    "msg" : ""
                },
                "isVtype" : false,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 1
            }
        ],
        "bytecode_offset" : 30,
        "inDevices" : [

        ],
        "outDevices" : [

        ],
        "hostController" : "MASTER",
        "triggers" : [
            {
                "rule" : [
                    "button"
                ],
                "id" : "",
                "priority" : 1
            }
        ]
    },
    {
        "name" : "changeTask",
        "binded_devices" : [
            {
                "device_name" : "lw",
                "type" : 10,
                "controller" : "CTL",
                "port_maps" : {
                    "file" : "file1.txt"
                },
                "initialValue" : {
                    "msg" : ""
                },
                "isVtype" : false,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 1
            },
            {
                "device_name" : "mode",
                "type" : 4,
                "controller" : "MASTER",
                "port_maps" : {

                },
                "initialValue" : "red",
                "isVtype" : true,
                "readPolicy" : 0,
                "overwritePolicy" : 3,
                "isYield" : true,
                "polling_period" : -1,
                "isConst" : true,
                "ignoreWriteBacks" : false,
                "deviceKind" : 0
            }
        ],
        "bytecode_offset" : 6,
        "inDevices" : [

        ],
        "outDevices" : [

        ],
        "hostController" : "MASTER",
        "triggers" : [
            {
                "rule" : [
                    "lw"
                ],
                "id" : "",
                "priority" : 1
            }
        ]
    }
]
LITERALS_BEGIN
[
0,
"msg",
"green",
"red",
"MODE CHANGED TO ",
"pressed",
1,
"Green was pressed ",
" times. ",
"Red was pressed ",
" times.",
"on",
true,
false
]
BYTECODE_BEGIN
_temp:
[0] LOAD a
[1] TRAP print 1
[2] LOAD a
[3] CALL temp 1
[4] PUSH 0
[5] RETURN
_changeTask:
[6] LOAD lw
[7] PUSH "msg"
[8] ALOAD
[9] PUSH "green"
[10] EQ
[11] JMPSC_OR 18
[12] LOAD lw
[13] PUSH "msg"
[14] ALOAD
[15] PUSH "red"
[16] EQ
[17] OR
[18] BRANCH 29
[19] PUSH "MODE CHANGED TO "
[20] LOAD message
[21] ADD
[22] TRAP println 1
[23] LOAD lw
[24] PUSH "msg"
[25] ALOAD
[26] STORE message
[27] LOAD message
[28] JMP 29
[29] EMIT STOP
_buttonLog:
[30] LOAD button
[31] PUSH "pressed"
[32] ALOAD
[33] BRANCH 94
[34] MKTYPE val int
[35] PUSH 0
[36] STORE val
[37] LOAD mode
[38] PUSH "red"
[39] EQ
[40] BRANCH 53
[41] LOAD countMap
[42] PUSH "red"
[43] ALOAD
[44] LOAD countMap
[45] PUSH "red"
[46] LOAD countMap
[47] PUSH "red"
[48] ALOAD
[49] PUSH 1
[50] ADD
[51] ASTORE
[52] JMP 64
[53] LOAD countMap
[54] PUSH "green"
[55] ALOAD
[56] LOAD countMap
[57] PUSH "green"
[58] LOAD countMap
[59] PUSH "green"
[60] ALOAD
[61] PUSH 1
[62] ADD
[63] ASTORE
[64] MKTYPE greenCnt int
[65] LOAD countMap
[66] PUSH "green"
[67] ALOAD
[68] STORE greenCnt
[69] MKTYPE redCnt int
[70] LOAD countMap
[71] PUSH "red"
[72] ALOAD
[73] STORE redCnt
[74] LOAD fl
[75] PUSH "msg"
[76] PUSH "Green was pressed "
[77] LOAD greenCnt
[78] TRAP toString 1
[79] ADD
[80] PUSH " times. "
[81] ADD
[82] PUSH "Red was pressed "
[83] ADD
[84] LOAD redCnt
[85] TRAP toString 1
[86] ADD
[87] PUSH " times."
[88] ADD
[89] ASTORE
[90] LOAD fl
[91] PUSH "msg"
[92] ALOAD
[93] JMP 94
[94] EMIT STOP
_buttonLight:
[95] LOAD button
[96] PUSH "pressed"
[97] ALOAD
[98] BRANCH 119
[99] LOAD mode
[100] PUSH "red"
[101] EQ
[102] BRANCH 111
[103] LOAD redLight
[104] PUSH "on"
[105] PUSH true
[106] ASTORE
[107] LOAD redLight
[108] PUSH "on"
[109] ALOAD
[110] JMP 118
[111] LOAD greenLight
[112] PUSH "on"
[113] PUSH true
[114] ASTORE
[115] LOAD greenLight
[116] PUSH "on"
[117] ALOAD
[118] JMP 133
[119] LOAD redLight
[120] PUSH "on"
[121] PUSH false
[122] ASTORE
[123] LOAD redLight
[124] PUSH "on"
[125] ALOAD
[126] LOAD greenLight
[127] PUSH "on"
[128] PUSH false
[129] ASTORE
[130] LOAD greenLight
[131] PUSH "on"
[132] ALOAD
[133] EMIT STOP
